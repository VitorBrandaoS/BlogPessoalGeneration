<div class="container-fluid bg-inicio p-0">
    <div class="d-flex flex-rowrap align-items-center p-0">
        <div class="col-md-6 d-flex flex-column justify-content-center bg-img p-0">
            <div class="d-flex justify-content-center">
                <div class="text-secondary">
                    <h1 class="fs-54">Welcome!</h1>
                    <h5 class="fs-18">Post your arts here!</h5>
                </div>
            </div>

            <div class="d-flex justify-content-center mt-3 mb-5">
                <div class="">
                    <button class="btn btn-color mr-2 font-color" data-toggle="modal" data-target="#newPost">New Post</button>
                    <a class="btn btn-outline-secondary" href="#posts">See Post</a>
                </div>
            </div>
        </div>
        <!---->
        <div class="col-md-6 p-0">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="https://i.imgur.com/r9AUApE.jpg" class="d-block carousel-img"
                            alt="Digital Art Carrousel">
                    </div>
                    <div class="carousel-item">
                        <img src="https://i.imgur.com/IfiOGmo.jpg" class="d-block carousel-img"
                            alt="Digital Art Carrousel">
                    </div>
                    <div class="carousel-item">
                        <img src="https://i.imgur.com/CI7RYPA.jpg" class="d-block carousel-img"
                            alt="Digital Art Carrousel">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>

</div>

<div class="container mb-5 mt-5" id="posts">
    <nav>
        <div class="nav nav-tabs d-flex justify-content-center" id="nav-tab" role="tablist">
            <a class="nav-link active text-secondary font-weight-bold" id="nav-home-tab" data-toggle="tab"
                href="#allPosts" role="tab" aria-controls="nav-allPosts" aria-selected="true">All Posts</a>

            <a (click)="findByIdUser()" class="nav-link text-secondary font-weight-bold" id="nav-myPosts-tab"
                data-toggle="tab" href="#myPosts" role="tab" aria-controls="nav-myPosts" aria-selected="false">My
                Posts</a>

            <a class="nav-link text-secondary font-weight-bold" id="nav-postsTheme-tab" data-toggle="tab"
                href="#postsTheme" role="tab" aria-controls="nav-postsTheme" aria-selected="false">Posts by Theme</a>
        </div>
    </nav>

    <div class="tab-content" id="nav-tabContent">

        <div class="tab-pane fade show active" id="allPosts" role="tabpanel" aria-labelledby="nav-allPosts-tab">

            <div class="row d-flex justify-content-center mt-5">
                <div class="col-md-4">
                    <div class="form-group">
                        <input type="text" class="form-control" id="titulo" placeholder="Enter a post title to search."
                            [(ngModel)]="tituloPost" (keyup)="findByTituloPostagem()">
                    </div>
                </div>
            </div>

            <div class="d-flex flex-wrap justify-content-center mt-3">
                <div class="card m-3 card-style hreact" style="width: 20rem;"
                    *ngFor="let item of listaPostagens | orderBy : key : reverse">

                    <img src="{{item.imagem}}" class="card-img-top img-card" alt="...">
                    <a class="btn-react" (click)="reactionFunction(item.id, 'like')"><img class="reaction like"
                            src="../../assets/img/gostar.png" alt="Like"></a>
                    <p class="conter-like p-react">{{item.curtida}}</p>
                    <a class="btn-react" (click)="reactionFunction(item.id, 'love')"><img class="reaction love"
                            src="../../assets/img/heart.png" alt="Love"></a>
                    <p class="conter-love p-react">{{item.amou}}</p>
                    <div class="card-body">
                        <h5 class="card-title">{{item.titulo}}</h5>
                        <hr>
                        <p class="card-text">{{item.texto}}</p>
                        <small class="text-muted">{{item.data | date: 'MM/dd/yyyy'}} at {{item.data | date:
                            'HH:mm'}}</small>
                        <br>
                        <small class="text-muted">Theme: {{item.tema.descricao}}</small>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="d-flex flex-row align-items-center">
                                <small class="text-muted">Posted by:</small>
                                <p class="text-muted font-italic ml-2 m-0">{{item.usuario.usuario}}</p>
                            </span>
                            <span class="d-flex flex-row align-items-center">
                                <!--<p class="font-italic mr-2 m-0">{{item.usuario.usuario}}</p>-->

                                <img src="{{item.usuario.foto}}" class="foto-perfil rounded-circle" alt="">

                            </span>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="myPosts" role="tabpanel" aria-labelledby="nav-myPosts-tab">

            <div class="row d-flex justify-content-center mt-5">
                <div class="col-md-4">
                    <div class="form-group">
                        <input type="text" class="form-control" id="titulo" placeholder="Enter a post title to search."
                            [(ngModel)]="tituloPost" (keyup)="findByTituloPostagemUser()">
                    </div>
                </div>
            </div>

            <div class="d-flex flex-wrap justify-content-center mt-3">
                <div class="card m-3 card-style" style="width: 20rem;"
                    *ngFor="let item of usuario.postagem | orderBy : key : reverse">
                    <img src="{{item.imagem}}" class="card-img-top img-card" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">{{item.titulo}}</h5>
                        <hr>
                        <p class="card-text">{{item.texto}}</p>
                        <small class="text-muted">{{item.data | date: 'MM/dd/yyyy'}} at {{item.data | date:
                            'HH:mm'}}</small>
                        <br>
                        <small class="text-muted">Theme: {{item.tema.descricao}}</small>
                        <br>
                        <div class="text-center">
                            <a [routerLink]="['/postagem-edit', item.id]" routerLinkActive="router-link-active"
                                class="text-info mr-3" href="">Edit</a>
                            <a [routerLink]="['/postagem-delete', item.id]" routerLinkActive="router-link-active"
                                class="text-danger" href="">Delete</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="postsTheme" role="tabpanel" aria-labelledby="nav-postsTheme-tab">

            <div class="row d-flex justify-content-center mt-5">
                <div class="col-md-4">
                    <div class="form-group">
                        <input type="text" class="form-control" id="titulo" placeholder="Enter a theme to search."
                            [(ngModel)]="nomeTema" (keyup)="findByNomeTema()">
                    </div>
                </div>
            </div>

            <div class="d-flex flex-wrap justify-content-center mt-3" *ngFor="let tema of listaTemas">
                <div class="card m-3 card-style" style="width: 20rem;"
                    *ngFor="let item of tema.postagem | orderBy : key : reverse">
                    <img src="{{item.imagem}}" class="card-img-top img-card" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">{{item.titulo}}</h5>
                        <hr>
                        <p class="card-text">{{item.texto}}</p>
                        <small class="text-muted">{{item.data | date: 'MM/dd/yyyy'}} at {{item.data | date:
                            'HH:mm'}}</small>
                        <br>
                        <p class="card-text"><small class="text-muted">Posted by: {{item.usuario.nome}}</small></p>
                        <small class="text-muted">Theme: {{tema.descricao}}</small>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>




<!-- Modal -->
<div class="modal fade" id="newPost" data-backdrop="static" data-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">New Post</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">

                <div class="form-group">
                    <label for="title">Image URL</label>
                    <input [(ngModel)]="postagem.imagem" type="text" class="form-control" id="title"
                        placeholder="Enter the image URL">
                </div>

                <div class="form-group">
                    <label for="title">Title</label>
                    <input [(ngModel)]="postagem.titulo" type="text" class="form-control" id="title"
                        placeholder="Enter the title">
                </div>



                <div class="form-group">
                    <label for="text">Text</label>
                    <textarea [(ngModel)]="postagem.texto" class="form-control" name="text" id="text"
                        rows="3"></textarea>
                </div>



                <div class="form-group">
                    <label for="text">Choose a theme or <a routerLink="/tema" data-dismiss="modal">register a
                            theme.</a></label>
                    <select name="theme" id="theme" class="form-control" [(ngModel)]="idTema" (change)="findByIdTema()">
                        <option *ngFor="let item of listaTemas" value="{{item.id}}">{{item.descricao}}</option>
                    </select>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-success" (click)="publicar()" data-dismiss="modal">Publish</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById("imagemPost").src = "{{postagem.imagem}}"
</script>